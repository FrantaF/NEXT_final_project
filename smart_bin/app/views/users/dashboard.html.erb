<!-- For MapBox GL JS -->
<!-- <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.48.0/mapbox-gl.css' rel='stylesheet' />
 -->
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.css' rel='stylesheet' />
<!-- <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.48.0/mapbox-gl.js'></script> -->
<script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.js'></script>

<style>
  
  body {
    margin: 0;
    padding: 0;
  }

  #map {
/*    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;*/
  }

  .truck {
  margin: -10px -10px;
  width: 20px;
  height: 20px;
  border: 2px solid #fff;
  border-radius: 50%;
  background: #3887be;
  pointer-events: none;
}
</style>



<!-- Page Content -->
<div class="container">

    <!-- Page Heading/Breadcrumbs -->
    <div class="row">
        <div class="col-lg-12 mt-5">            
            <ol class="breadcrumb">
                <li><%= link_to 'Dashboard', root_path %>
                </li>                
            </ol>
        </div>
    </div>
    <!-- /.row -->

    <h1>DRAFT - THIS IS WHERE MAPS LOCATION AND ROUTING WILL BE!</h1>

    <!-- For MapBox GL JS -->
<!--             This is where the map should start
    <div id='map' style='width: 400px; height: 300px;'></div>
            This is where the map should end
        <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiZXpsYW5tb2hzZW4iLCJhIjoiY2psbjQzYTYyMWY5aTNqbGQyNmp6aXp2ZyJ9.SxnU74puEKAXw_GlSXL4vQ';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v9'
        });
        </script> -->

    <!-- For MapBox -->
    Map Starts
    <div id='map' class='contain' style="border:1px solid black; width:100%; height:400px">Map</div>
    Map Ends
    <script>
      console.log("Script Starts");
      var truckLocation = [101.630, 3.135];
      var warehouseLocation = [-83.083, 42.363];
      var lastQueryTime = 0;
      var lastAtRestaurant = 0;
      var keepTrack = [];
      var currentSchedule = [];
      var currentRoute = null;
      var pointHopper = {};
      var pause = true;
      var speedFactor = 50;

      // Add your access token
      mapboxgl.accessToken = 'pk.eyJ1IjoiZXpsYW5tb2hzZW4iLCJhIjoiY2psbjQzYTYyMWY5aTNqbGQyNmp6aXp2ZyJ9.SxnU74puEKAXw_GlSXL4vQ';

      // Initialize a map
      var map = new mapboxgl.Map({
        container: 'map', // container id
        style: 'mapbox://styles/mapbox/light-v9', // stylesheet location
        center: truckLocation, // starting position
        zoom: 12 // starting zoom
      });

          map.on('load', function() {
        var marker = document.createElement('div');
        marker.classList = 'truck';

        // Create a new marker
        truckMarker = new mapboxgl.Marker(marker)
        .setLngLat(truckLocation)
        .addTo(map);
        });
    </script>


    <!-- Content Row -->
    <div class="row">
        <!-- Map Column -->
        <div class="col-md-8">
            <!-- Embedded Google Map -->
            <iframe width="100%" height="400px" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?hl=en&amp;ie=UTF8&amp;ll=37.0625,-95.677068&amp;spn=56.506174,79.013672&amp;t=m&amp;z=4&amp;output=embed"></iframe>
        </div>
        <!-- Contact Details Column -->
        <div class="col-md-4">
            <h3>Your Savings</h3>
            <p>
                You are saving XXX$ by only collecting 705 of the bins.
            </p>


        </div>
    </div>
    <!-- /.row -->

    <!-- Table view -->
    <div class="container">
        <h2>Bin Table</h2>                    
        <table class="table">
            <thead>
              <tr>
                <th>Unit</th>
                <th>Created on</th>
                <th>Currenct Capacity</th>
                <th>Location</th>
                <th>Collection Date</th>
            </tr>
        </thead>
        <tbody>
          <tr>
            <td>A</td>
            <td>01.08.2018</td>
            <td>70%</td>
            <td>Click here</td>
            <td>2 days ago</td>
        </tr>
        <tr>
            <td>B</td>
            <td>01.08.2018</td>
            <td>80%</td>
            <td>Click here</td>
            <td>Last week</td>
        </tr>
        <tr>
            <td>C</td>
            <td>01.08.2018</td>
            <td>90%</td>
            <td>Click here</td>
            <td>Today</td>
        </tr>
    </tbody>
</table>
</div>
</div>
<!-- /.container -->


